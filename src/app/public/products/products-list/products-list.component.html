<ng-container *transloco="let t; read: 'productsList'">
  <div class="container">
    <div class="filter-container">
      <div class="filter">
        <div class="filter-item">
          <label for="filter">{{ t("filter") }}</label>
          <select
            id="filter"
            class="filter-select"
            [formControl]="filterControl">
            <option value="">{{ t("all") }}</option>
            <optgroup label="{{ t('category') }}">
              @for (category of categories(); track $index) {
                <option value="categoryId-{{ category.id }}">
                  {{ category.name | currLang }}
                </option>
              }
            </optgroup>
            <optgroup label="{{ t('collection') }}">
              @for (collection of collections(); track $index) {
                <option value="collectionId-{{ collection.id }}">
                  {{ collection.name | currLang }}
                </option>
              }
            </optgroup>
            <optgroup label="{{ t('material') }}">
              @for (material of materials(); track $index) {
                <option value="materialId-{{ material.id }}">
                  {{ material.name | currLang }}
                </option>
              }
            </optgroup>
          </select>
        </div>
      </div>
    </div>
    <div class="products-list">
      @for (product of products(); track $index; let last = $last) {
        <a
          class="product-card"
          [routerLink]="product.id"
          (appIntersectionListener)="loadMore(last)">
          <div class="product-image">
            <img
              fill
              priority
              [ngSrc]="product.images![0].previewUrl"
              alt="{{ product.name }}"
              [class.out-of-stock]="!product.quantity" />
          </div>
          <h2 class="product-name">{{ product.name }}</h2>
          <p class="product-price">{{ product.price }} â‚¼</p>
        </a>
      }
    </div>
  </div>
</ng-container>
