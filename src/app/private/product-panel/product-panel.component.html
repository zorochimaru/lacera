<div class="form-container">
  <form [formGroup]="form" (ngSubmit)="onSubmit()">
    <h3>Product edit panel</h3>

    <div class="title-container" formGroupName="name">
      <input
        type="text"
        class="form-control"
        formControlName="az"
        placeholder="Name az" />
      <input
        type="text"
        class="form-control"
        formControlName="ru"
        placeholder="Name ru" />
      <input
        type="text"
        class="form-control"
        formControlName="en"
        placeholder="Name en" />
    </div>
    <div formGroupName="description" class="text-container">
      <textarea
        formControlName="az"
        class="form-control"
        placeholder="Description az"></textarea>
      <textarea
        formControlName="ru"
        class="form-control"
        placeholder="Description ru"></textarea>
      <textarea
        formControlName="en"
        class="form-control"
        placeholder="Description en"></textarea>
    </div>
    <div>
      <label for="amount"> Amount </label>
      <input
        id="amount"
        type="number"
        class="form-control"
        formControlName="amount"
        placeholder="Amount" />
    </div>
    <div>
      <label for="price">Price AZN</label>
      <input
        id="price"
        type="number"
        class="form-control"
        formControlName="price"
        placeholder="Price" />
    </div>
    <div class="gallery-container" [class.disabled]="loading()">
      <div class="upload-action-container">
        <label for="uploadInput" class="btn">
          {{
            files().length
              ? files().length + " new images selected"
              : "Upload images"
          }}
        </label>
        <input
          id="uploadInput"
          type="file"
          class="visually-hidden"
          [accept]="accept"
          multiple
          #filesInput
          (change)="onFileChange()" />

        <a
          href="https://squoosh.app/"
          target="_blank"
          class="link"
          rel="noopener noreferrer">
          ðŸ‘‰Squoosh to webp!ðŸ‘ˆ
        </a>
      </div>
    </div>
    <div class="thumbnail-container">
      <div
        *ngFor="let imageUrl of form.controls.imageUrls.valueChanges | async">
        <button
          type="button"
          class="delete-thumbnail-btn"
          (click)="deleteImage(imageUrl)">
          Delete
        </button>
        <img width="100" height="100" [src]="imageUrl" alt="" />
      </div>
    </div>
    <button
      type="submit"
      class="btn btn-success"
      [disabled]="loading() || form.invalid">
      Submit
    </button>
    <button
      *ngIf="id"
      type="button"
      class="btn btn-danger"
      (click)="delete()"
      [disabled]="loading()">
      Delete
    </button>
  </form>
</div>
