<div class="form-container">
  <form [formGroup]="form" (ngSubmit)="onSubmit()">
    <h3>News admin panel</h3>
    <div class="gallary-container" [class.disabled]="loading()">
      <div>
        <label for="coverInput" class="btn">
          {{ coverFile() ? "Change cover" : "Select cover" }}
        </label>
        <input
          id="coverInput"
          type="file"
          class="visually-hidden"
          [accept]="accept"
          multiple
          #fileInput
          (change)="onCoverFileChange()" />
      </div>
    </div>
    <input
      type="text"
      class="form-control"
      formControlName="title"
      placeholder="Title" />

    <textarea
      formControlName="text"
      class="form-control"
      placeholder="Text"></textarea>
    <div class="gallary-container" [class.disabled]="loading()">
      <div>
        <label for="uploadInput" class="btn">
          {{ files().length ? "Change images" : "Upload images" }}
        </label>
        <input
          id="uploadInput"
          type="file"
          class="visually-hidden"
          [accept]="accept"
          multiple
          #fileInput
          (change)="onFileChange()" />
      </div>
    </div>
    <div class="thumbnail-container">
      <div
        *ngFor="let imageUrl of form.controls.imageUrls.valueChanges | async">
        <button
          type="button"
          class="delete-thumbnail-btn"
          (click)="deleteImage(imageUrl)">
          Delete
        </button>
        <img width="100" height="100" [src]="imageUrl" alt="" />
      </div>
    </div>
    <button type="submit" class="btn" [disabled]="loading() || form.invalid">
      Submit
    </button>
    <button
      *ngIf="newsId"
      type="button"
      class="btn btn-danger"
      (click)="deleteNews()"
      [disabled]="loading()">
      Delete
    </button>
  </form>
</div>
